<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
# Lets Codea


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### JQuery and other frameworks
* Frameworks are great but you need to learn to write javascript first!
* Please do not use javascript frameworks like jQuery for your milestone or prac submissions
* You may however use them for your team website


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Review: ROT13
Nice job Ryan!!

```js
function rot13(string) {
  var alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');
  var letters = string.split('');
  var answer = '';
  var len = string.length
  for (i = 0; i !== len; i++) {
    var index = alphabet.indexOf(letters[i]);
    if (index >= 13) {
      index = index - 13;
      answer = answer + alphabet[index];
    }
    else {
      index = index + 13;
      answer = answer + alphabet[index];;
    }
  }
  console.log(answer);
}

rot13('abcdefghijklmnopqrstuvwxyz')
```



<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
## Debugging


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Before we start
* Open the hairsalon page and attach the CSS file if it is not already
* Download and attach main.js
* What do you think this file is supposed to do?
* The file is broken, follow along with the debugger and see if you can find why


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### What is debugging
* Locating and fixing errors in code
* Performed at runtime
	* e.g. in the browser


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### How do we debug
* Chrome developer tools provides us with an _inline debugger_
* We can step through our code, line by line as it actually executes
* There are two main ways to do this


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Debugging from the sources tab
1. If you open up dev tools and go to sources you will find all your js files
2. Open the file you want to debug and find the function you want to troubleshoot
3. Find a line just before where you have a problem and click the line number
4. A blue arrow appears to indicate you have set a *break point*
5. When the code gets to your break point it will pause


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Open the debugger
<video>
	<source data-src="videos/debug-open.webm" type="video/webm" />
</video>


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Breakpoint
* Clicking on a line number creates a breakpoint
* When the code at the breakpoint is about to execute the browser will pause and open the deugger
* Lines with breakpoints are indicated with a blue arrow

![blue breakpoint marker](images/debug-breakpoint.png)


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Debug controls
* Play icon resumes normal code execution
* Step over continues to the next line in the current function
* Step into pauses on the first line of the function about to be executed
* Stop out pauses on the next line of the calling (parent) function
* Can you find out what the last two do?

![Debug control icons](images/debug-controls.png)


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
<video>
	<source data-src="videos/debug-breakpoint.webm" type="video/webm" />
</video>


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Review
* Why is main.js broken?
* Can you fix it?



<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
## Event Listeners
* An event listener is code that runs when an certain event happens
* Common events include
	* An element is clicked
	* An input is changed
	* Text is selected
	* Media is played or stopped


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Add an event listener
* assign event listener by calling `addEventListener` on the element
* Takes two arguments
	* Event to listen for
	* A callback

```js
var button = document.querySelector('#btn');
var btnClicked = function(evt) {
	console.log('Button clicked', evt);
});
button.addEventListener('click', btnClicked);
```


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### What's a callback???
* A callback is a function that is passed as a parameter to call later
* They are used to execute code after something happens
* We can pass the function like a variable or pass an anonymous function
	* An anonymous function is not saved anywhere

```js
var button = document.querySelector('#btn');
button.addEventListener('click', function(evt) {
	console.log('Button clicked', evt);
});
```


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Some events to listen to
* [mouseenter](https://developer.mozilla.org/en-US/docs/Web/Events/mouseenter)
* [mouseover](https://developer.mozilla.org/en-US/docs/Web/Events/mouseover)
* [mousemove](https://developer.mozilla.org/en-US/docs/Web/Events/mousemove)
* [mousedown](https://developer.mozilla.org/en-US/docs/Web/Events/mousedown)
* [mouseup](https://developer.mozilla.org/en-US/docs/Web/Events/mouseup)
* [click](https://developer.mozilla.org/en-US/docs/Web/Events/click)
* [wheel](https://developer.mozilla.org/en-US/docs/Web/Events/wheel)
* [mouseleave](https://developer.mozilla.org/en-US/docs/Web/Events/mouseleave)
* [mouseout](https://developer.mozilla.org/en-US/docs/Web/Events/mouseout)
* [select](https://developer.mozilla.org/en-US/docs/Web/Events/select)


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Try them out
[Mouse event demo](https://codepen.io/elvey/pen/gzPLxv)


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Remove an event listener
To remove an event listener you can call Element.removeEventListener() and pass it the event type and the function you want to remove.

```js
button.addEventListener('click', clickHandler);
button.removeEventListener('click', clickHandler);
```


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### Code Challenge
Working with your table, can you make a drag and drop?

```js
/**
* Add drag and drop functionality to an element
* @param {Element} target The element to add drag and drop functions too
* @return {undefined} No return value
**/
```


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
### A couple of gotchas
* Sometimes other actions can execute on events
	* Other event handlers
	* Browser default actions


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
#### Bubbles
* Some types of event &quot;bubble&quot; up the DOM tree
* This is also called Event Propagation
* This means that after an event fires on an element, it fires again on the parent
	* or before if we set them to &quot;capture&quot;
* We can prevent this with Event.stopPropagation()
* Try to only stop propagation when you have to. It can be really useful


<!-- .slide: data-background-image="../images/bg-mouse.jpg" -->
#### Brower default handlers
* The browser has default actions for some events
* e.g. The browser redirects when a form is submitted or a link is clicked
* To prevent this all Event.preventDefault()
